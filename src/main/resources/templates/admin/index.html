<!DOCTYPE html>
<html lang="ru" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin panel</title>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link type="image/x-icon" href="/favicon.ico" rel="shortcut icon">
    <link type="Image/x-icon" href="/favicon.ico" rel="icon">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
          integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/index.css}"/>
</head>
<body>
<div class="panel-head">
    <div th:replace="fragments/top_navbar"></div>
</div>
<div class="container-fluid text-left">
    <div class="row content">
        <div class="col-sm-2">
            <div th:replace="fragments/left_navbar"></div>
        </div>
        <div class="col-sm-10 text-left">
            <div class="uc-title">
                <h1>Admin panel</h1>
            </div>
            <div id="error-content" th:if="${error}" class="alert alert-danger" role="alert" >
                <th:block th:each="line : ${error.split('#')}">
                    <span th:text="${line}"></span><br>
                </th:block>
            </div>
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="tab-link nav-link active" href="javascript:void(0);">Users table</a>
                </li>
                <li class="nav-item">
                    <a class="tab-link nav-link" href="javascript:void(0);">New User</a>
                </li>
            </ul>
            <div class="uc-content-title">
                <nav class="navbar navbar-text">
                    <span class="uc-navbar-title navbar-brand mb-0 h1">All users</span>
                </nav>
            </div>
            <div class="tab-content">
                <div class="list-user">
                    <div th:replace="fragments/list_user"></div>
                </div>
                <div class="form-new" style="display: none;">
                    <div th:replace="fragments/form_new"></div>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Modal edit form -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document" style="margin: auto; text-align: center; padding: 15px">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Edit user</h5>
            </div>
            <div style="margin: auto; width: 75%">
                <form class="form-edit-user" th:method="PATCH" th:action="@{/admin}" novalidate>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="h5" for="firstName">First Name</label>
                            <input type="text" class="form-control" name="firstName" id="firstName"
                                   placeholder="First Name" required pattern="^[a-zA-Zа-яА-Я]{2,30}$">
                            <div class="invalid-feedback">First Name should not be empty, and should be between 2 and 30
                                characters.
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="h5" for="lastName">Last Name</label>
                            <input type="text" class="form-control" name="lastName" id="lastName"
                                   placeholder="Last Name" required pattern="^[a-zA-Zа-яА-Я]{2,30}$">
                            <div class="invalid-feedback">Last Name should not be empty, and should be between 2 and 30
                                characters.
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="h5" for="age">Age</label>
                            <input min="0" max="99" type="number" class="form-control" name="age" id="age"
                                   value="0" placeholder="Age" required pattern="^\d{1,2}$">
                            <div class="invalid-feedback">Age should not be empty, and should be greater than 0</div>
                        </div>
                        <div class="form-group">
                            <label class="h5" for="email">Email</label>
                            <input type="text" class="edit form-control" name="email" id="email"
                                   placeholder="Email" required pattern="^\S+@\S+\.\S+">
                            <div class="invalid-feedback">Email should not be empty.</div>
                            <div class="custom-edit-email-invalid-feedback" style="display: none">User with this email
                                already exists.
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="h5" for="password">Password</label>
                            <input type="password" class="form-control" name="password" id="password"
                                   pattern="^()|(\S{2,8})$"
                                   placeholder="Password">
                            <div class="invalid-feedback">Leave the password blank to keep the current one,
                                or enter 2 to 8 characters to change.
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="h5" for="roles">Role</label>
                            <select multiple class="form-control" name="roles" id="roles" required>
                                <option value="2">ADMIN</option>
                                <option value="1">USER</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="fn-btn-edit-user btn-action btn"></button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
        integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2"
        crossorigin="anonymous"></script>

<script th:src="@{/js/index.js}"></script>
</body>
</html>